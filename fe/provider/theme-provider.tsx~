"use client"

import { createContext, useMemo, useState, useContext, type ReactNode } from "react"
import { createTheme, ThemeProvider as MuiThemeProvider } from "@mui/material/styles"
import CssBaseline from "@mui/material/CssBaseline"

// Create a context for the color mode
export const ColorModeContext = createContext({ toggleColorMode: () => {} })

interface AppThemeProviderProps {
    children: ReactNode
}

export default function AppThemeProvider({ children }: AppThemeProviderProps) {
    const [mode, setMode] = useState<"light" | "dark">("light") // Default to light mode

    const colorMode = useMemo(
        () => ({
            toggleColorMode: () => {
                setMode((prevMode) => (prevMode === "light" ? "dark" : "light"))
            },
        }),
        [],
    )

    const theme = useMemo(
        () =>
            createTheme({
                palette: {
                    mode,
                    // You can customize your palette further here
                    // For example:
                    // primary: {
                    //   main: '#1976d2',
                    // },
                    // secondary: {
                    //   main: '#dc004e',
                    // },
                },
            }),
        [mode],
    )

    return (
        <ColorModeContext.Provider value={colorMode}>
            <MuiThemeProvider theme={theme}>
                <CssBaseline /> {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}
                {children}
            </MuiThemeProvider>
        </ColorModeContext.Provider>
    )
}

// Custom hook to easily use the color mode context
export const useColorMode = () => useContext(ColorModeContext)
